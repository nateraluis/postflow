<div class="mt-6 bg-white p-4 rounded-lg shadow border">
  <h2 class="text-lg font-semibold text-gray-900 mb-4">Connect Mastodon</h2>

  {% if user.mastodon_native_accounts.all %}
    <p class="text-gray-700">Connected accounts:</p>
    <ul class="mt-2 space-y-2">
      {% for account in user.mastodon_native_accounts.all %}
        <li class="flex items-center justify-between bg-gray-100 p-2 rounded">
          <span>{{ account.username }} @ {{ account.instance_url }}</span>
          <button
            class="text-red-600 hover:text-red-800"
            hx-delete="{% url 'mastodon:disconnect_mastodon' account.id %}"
            hx-confirm="Are you sure you want to disconnect?"
            hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
            hx-target="this"
            hx-swap="outerHTML">
            Disconnect
          </button>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-gray-500">No accounts connected.</p>
  {% endif %}

  <form method="POST" action="{% url 'mastodon:connect_mastodon' %}" class="mt-4">
    {% csrf_token %}
    <input
      type="text"
      name="instance_url"
      placeholder="mastodon.social or your instance URL"
      required
      class="w-full px-3 py-2 border border-gray-300 rounded mb-2">
    <button
      type="submit"
      class="w-full block text-center bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-500">
      Connect Mastodon Account
    </button>
  </form>
</div>
