{% for date, posts in grouped_posts.items %}
    <div class="bg-white p-4 rounded-lg shadow-md border-l-4 border-green-500">
        <h3 class="text-lg font-semibold text-green-900">âœ“ {{ date|date:"F j, Y" }}</h3>

        <!-- Stack posts inside each date card -->
        <div class="flex flex-col space-y-4 mt-2">
            {% for post in posts %}
                {% include 'postflow/components/partials/scheduled_post.html' with post=post %}
            {% endfor %}
        </div>
    </div>
{% endfor %}

<!-- Infinite scroll trigger for next page -->
{% if has_more %}
<div hx-get="{% url 'posted_history' %}?page={{ next_page }}"
     hx-trigger="revealed"
     hx-swap="afterend"
     class="text-center py-8">
    <span class="loading loading-spinner loading-md text-green-600"></span>
    <p class="text-sm text-gray-500 mt-2">Loading more posts...</p>
</div>
{% endif %}
