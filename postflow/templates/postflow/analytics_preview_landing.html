{% extends "postflow/_base_web.html" %}
{% load static plausible_tags %}

{% block main %}
<div class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50">
  <div class="max-w-4xl mx-auto px-6 py-16">
    <!-- Header -->
    <div class="text-center mb-12">
      <h1 class="text-5xl font-bold text-gray-900 mb-4">See Your Analytics in Action</h1>
      <p class="text-xl text-gray-600">Connect your Mastodon or Pixelfed account and get a free preview of PostFlow's analytics dashboard. No signup required.</p>
    </div>

    <!-- Error Message -->
    {% if error %}
    <div class="mb-8 bg-red-50 border border-red-200 text-red-800 px-6 py-4 rounded-lg">
      {{ error }}
    </div>
    {% endif %}

    <!-- Connection Form -->
    <div class="bg-white rounded-2xl shadow-xl p-8 mb-12">
      <h2 class="text-2xl font-semibold text-gray-900 mb-6">Connect Your Account</h2>
      <form method="POST" action="{% url 'analytics_preview_connect' %}">
        {% csrf_token %}
        <div class="mb-6">
          <label for="instance_url" class="block text-sm font-medium text-gray-700 mb-2">
            Your Mastodon/Pixelfed Instance
          </label>
          <input
            type="text"
            name="instance_url"
            id="instance_url"
            placeholder="pixelfed.social or mastodon.social"
            required
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
          >
          <p class="mt-2 text-sm text-gray-500">Enter your instance URL (e.g., pixelfed.social, mastodon.art)</p>
        </div>

        <!-- Quick Instance Selectors -->
        <div class="mb-6">
          <p class="text-sm font-medium text-gray-700 mb-3">Or choose a popular instance:</p>
          <div class="flex flex-wrap gap-2">
            <button type="button" onclick="document.getElementById('instance_url').value='pixelfed.social'" class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition text-sm font-medium">
              pixelfed.social
            </button>
            <button type="button" onclick="document.getElementById('instance_url').value='mastodon.social'" class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition text-sm font-medium">
              mastodon.social
            </button>
            <button type="button" onclick="document.getElementById('instance_url').value='mastodon.art'" class="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-md hover:bg-indigo-200 transition text-sm font-medium">
              mastodon.art
            </button>
          </div>
        </div>

        <button type="submit" {% plausible_event "Preview Connect Start" platform="mastodon" %} class="w-full bg-indigo-600 text-white py-4 px-6 rounded-md font-semibold text-lg hover:bg-indigo-500 transition shadow-sm">
          Connect & See My Analytics
        </button>

        <div class="mt-4 flex items-center justify-center gap-2 text-sm text-gray-600">
          <svg class="h-5 w-5 text-green-600" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z" />
          </svg>
          <span>We'll securely connect to your account (read-only). We never store your password.</span>
        </div>
      </form>
    </div>

    <!-- What You'll See -->
    <div class="bg-white rounded-2xl shadow-xl p-8">
      <h2 class="text-2xl font-semibold text-gray-900 mb-6 text-center">What You'll See in Your Preview</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="flex items-start gap-3">
          <div class="flex-shrink-0 w-10 h-10 bg-indigo-100 rounded-md flex items-center justify-center">
            <svg class="h-6 w-6 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />
            </svg>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-1">Engagement Summary</h3>
            <p class="text-sm text-gray-600">Total likes, comments, and shares across your 10 most recent posts</p>
          </div>
        </div>

        <div class="flex items-start gap-3">
          <div class="flex-shrink-0 w-10 h-10 bg-indigo-100 rounded-md flex items-center justify-center">
            <svg class="h-6 w-6 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
            </svg>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-1">Your Recent Posts</h3>
            <p class="text-sm text-gray-600">See your most recent posts with engagement metrics</p>
          </div>
        </div>

        <div class="flex items-start gap-3">
          <div class="flex-shrink-0 w-10 h-10 bg-indigo-100 rounded-md flex items-center justify-center">
            <svg class="h-6 w-6 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z" />
            </svg>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-1">Engagement Distribution</h3>
            <p class="text-sm text-gray-600">Breakdown of likes, comments, and shares</p>
          </div>
        </div>

        <div class="flex items-start gap-3">
          <div class="flex-shrink-0 w-10 h-10 bg-purple-100 rounded-md flex items-center justify-center">
            <svg class="h-6 w-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
            </svg>
          </div>
          <div>
            <h3 class="font-semibold text-gray-900 mb-1">Full Features Preview</h3>
            <p class="text-sm text-gray-600">Upgrade prompts to unlock complete analytics and scheduling</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Back to Home -->
    <div class="mt-8 text-center">
      <a href="{% url 'home' %}" class="text-indigo-600 hover:text-indigo-700 font-medium">
        ‚Üê Back to Home
      </a>
    </div>
  </div>
</div>

<script>
// Track page view
if (typeof plausible !== 'undefined') {
    plausible('pageview', {props: {page: 'analytics_preview_landing'}});
}
</script>
{% endblock %}
